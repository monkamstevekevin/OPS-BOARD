{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet AdminComponent = class AdminComponent {\n  constructor(api) {\n    this.api = api;\n    this.node = '';\n    this.vmid = '';\n    this.prog = '';\n    this.args = '';\n    this.stdin = '';\n    this.timeout = '10';\n    this.out = signal('');\n  }\n  call(fn, label) {\n    this.out.set('Loading...');\n    fn().subscribe({\n      next: r => this.out.set(`${label}: ` + JSON.stringify(r, null, 2)),\n      error: e => this.out.set('Erreur: ' + (e.message || e))\n    });\n  }\n  exec() {\n    const cmd = [this.prog, ...this.args.split(' ').filter(Boolean)];\n    const t = parseInt(String(this.timeout || '10'), 10);\n    this.call(() => this.api.adminExec(this.node, +this.vmid, cmd, this.stdin, t), 'exec');\n  }\n};\nAdminComponent = __decorate([Component({\n  selector: 'app-admin',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  template: `\n    <div class=\"card\">\n      <h3>Actions Admin</h3>\n      <div class=\"row\">\n        <div class=\"col\"><label>Node</label><input [(ngModel)]=\"node\" placeholder=\"ex: Caureqlab\"/></div>\n        <div class=\"col\"><label>VMID</label><input [(ngModel)]=\"vmid\" type=\"number\" placeholder=\"ex: 101\"/></div>\n      </div>\n      <div class=\"actions\" style=\"margin-top:8px\">\n        <button class=\"btn primary\" (click)=\"call(()=>api.adminStart(node, +vmid), 'start')\">Start</button>\n        <button class=\"btn\" (click)=\"call(()=>api.adminShutdown(node, +vmid), 'shutdown')\">Shutdown</button>\n        <button class=\"btn\" (click)=\"call(()=>api.adminStop(node, +vmid), 'stop')\">Stop</button>\n        <button class=\"btn\" (click)=\"call(()=>api.adminReset(node, +vmid), 'reset')\">Reset</button>\n      </div>\n      <hr>\n      <h3>Exec via QGA</h3>\n      <div class=\"row\">\n        <div class=\"col\"><label>Program</label><input [(ngModel)]=\"prog\" placeholder=\"ex: cmd.exe ou bash\"/></div>\n        <div class=\"col\"><label>Args</label><input [(ngModel)]=\"args\" placeholder=\"ex: /c whoami ou -lc whoami\"/></div>\n      </div>\n      <label>STDIN (optional)</label>\n      <textarea [(ngModel)]=\"stdin\" rows=\"3\"></textarea>\n      <div class=\"row\"><div class=\"col\"><label>Timeout (sec)</label><input [(ngModel)]=\"timeout\" type=\"number\" placeholder=\"10\"/></div></div>\n      <div class=\"actions\">\n        <button class=\"btn\" (click)=\"exec()\">Exec</button>\n      </div>\n      <pre class=\"muted\">{{out()}}</pre>\n    </div>\n  `\n})], AdminComponent);\nexport { AdminComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}